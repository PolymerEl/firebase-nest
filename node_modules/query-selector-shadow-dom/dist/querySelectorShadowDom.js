var querySelectorShadowDom=function(e){"use strict";function r(e,a,d){var t=d.querySelector(e);return document.head.createShadowRoot||document.head.attachShadow?!a&&t?t:h(e,",").reduce(function(e,t){if(!a&&e)return e;var c,l,i,r=h(t.replace(/^\s+/g,"").replace(/\s*([>+~]+)\s*/g,"$1")," ").filter(function(e){return!!e}),o=r.length-1,n=function(t,e){void 0===t&&(t=null);var n=[],r=function e(t){for(var r,o=0;r=t[o];++o)n.push(r),r.shadowRoot&&e(r.shadowRoot.querySelectorAll("*"))};e.shadowRoot&&r(e.shadowRoot.querySelectorAll("*"));return r(e.querySelectorAll("*")),t?n.filter(function(e){return e.matches(t)}):n}(r[o],d),u=(c=r,l=o,i=d,function(e){for(var t,r,o=l,n=e,u=!1;n;){var a=n.matches(c[o]);if(a&&0===o){u=!0;break}a&&o--,t=i,r=n.parentNode,n=r&&r.host&&11===r.nodeType?r.host:r===t?null:r}return u});return a?e=e.concat(n.filter(u)):(e=n.find(u))||null},a?[]:null):a?d.querySelectorAll(e):t}function h(e,r){return e.match(/\\?.|^$/g).reduce(function(e,t){return'"'!==t||e.sQuote?"'"!==t||e.quote?e.quote||e.sQuote||t!==r?e.a[e.a.length-1]+=t:e.a.push(""):(e.sQuote^=1,e.a[e.a.length-1]+=t):(e.quote^=1,e.a[e.a.length-1]+=t),e},{a:[""]}).a}return e.querySelectorAllDeep=function(e,t){return void 0===t&&(t=document),r(e,!0,t)},e.querySelectorDeep=function(e,t){return void 0===t&&(t=document),r(e,!1,t)},e}({});
